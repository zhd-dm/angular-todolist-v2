"use strict";(self.webpackChunkangular_todolist_v2=self.webpackChunkangular_todolist_v2||[]).push([[470],{5470:(Ct,x,n)=>{n.r(x),n.d(x,{TaskModule:()=>vt});var m=n(6895),s=n(4006),_=n(1635),t=n(4650),f=n(5039),D=n(8885),U=n(6146),P=n(1135),X=n(7579),h=n(5698),E=n(2722),C=n(6308),l=n(7155),k=n(7525),q=n(3985);const $={id:"ID",taskName:"Task name",deadline:"Deadline",priority:"Priority",category:"Category",settings:"Settings",deleteTask:"Delete task",editTask:"Edit task",empty:"No tasks avaliable..."},O={createNewTask:"Create new task",taskName:"Task Name",deadline:"Deadline",category:"Category",nothing:"Nothing",priority:"Priority?",create:"Create"},w={delete:"Delete",sure:"Are you sure?"},R={taskName:"Task name",editTask:"Edit task",deadline:"Deadline",category:"Category",nothing:"Nothing",priority:"Priority?",update:"Update"};var u=n(5412),A=n(5328),S=n(8273),c=n(3121),Q=n(4761);let v=(()=>{class e{constructor(a){this.apiService=a}getTasks(){return this.apiService.sendRequest(c.V7.get,`${c.rY}${c.wA.get}`)}createTask(a){return this.apiService.sendRequest(c.V7.post,`${c.rY}${c.wA.create}`,a)}updateTask(a){return this.apiService.sendRequest(c.V7.put,`${c.rY}${c.wA.update}`,a)}deleteTask(a){return this.apiService.sendRequest(c.V7.delete,`${c.rY}${c.wA.delete}`,a)}}return e.\u0275fac=function(a){return new(a||e)(t.LFG(Q.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var Z=n(4072),p=n(9549),b=n(4144),M=n(6709),g=n(9602),N=n(4385),Y=n(3238),y=n(4083);function B(e,i){if(1&e&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.s9C("value",a.name),t.xp6(1),t.Oqu(a.name)}}let F=(()=>{class e{constructor(a,o,r,T,d,L,Et){this.router=a,this.dialogRef=o,this.loadingService=r,this.notificationService=T,this.eventBusService=d,this.taskService=L,this.categoryService=Et,this.TEMPLATE_TEXT=O,this.categories$=this.categoryService.getCategories(),this.form=new s.cw({name:new s.NI(null,[s.kI.required,s.kI.minLength(5)]),deadline:new s.NI(null,[s.kI.required]),category:new s.NI(null),priority:new s.NI(null)})}createTask(){this.loadingService.startLoad(),this.taskService.createTask(this.form.value).pipe((0,h.q)(1)).subscribe({next:a=>{this.notificationService.openSnackBar(a.message||""),a.status&&(this.goTo(q.W$.tasksList),this.eventBusService.push({type:k.t.UPDATE_TASK_LIST}))},error:a=>{this.dialogRef.close(),console.error(a)}}),this.dialogRef.close()}goTo(a){this.router.navigate([a])}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(_.F0),t.Y36(u.so),t.Y36(f.b),t.Y36(A.g),t.Y36(S.Y),t.Y36(v),t.Y36(Z.H))},e.\u0275cmp=t.Xpm({type:e,selectors:[["create-task-modal"]],decls:25,vars:15,consts:[[1,"form-group","form-group__modal","flex-column",3,"formGroup"],[1,"mat-title"],["color","accent","appearance","outline"],["type","text","matInput","","formControlName","name",3,"placeholder"],["type","text","matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"mbottom-20"],["type","submit",3,"disabled","label","buttonClick"],[3,"value"]],template:function(a,o){if(1&a&&(t.TgZ(0,"form",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9),t.qZA(),t._UZ(10,"input",4)(11,"mat-datepicker-toggle",5)(12,"mat-datepicker",null,6),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"mat-select",7)(18,"mat-option"),t._uU(19),t.qZA(),t.YNc(20,B,2,2,"mat-option",8),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"mat-checkbox",9),t._uU(23),t.qZA(),t.TgZ(24,"ui-button",10),t.NdJ("buttonClick",function(){return o.createTask()}),t.qZA()()),2&a){const r=t.MAs(13);t.Q6J("formGroup",o.form),t.xp6(2),t.Oqu(o.TEMPLATE_TEXT.createNewTask),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.taskName),t.xp6(1),t.Q6J("placeholder",o.TEMPLATE_TEXT.taskName),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.deadline),t.xp6(1),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(o.TEMPLATE_TEXT.category),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.nothing),t.xp6(1),t.Q6J("ngForOf",t.lcZ(21,13,o.categories$)),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.priority),t.xp6(1),t.Q6J("disabled",o.form.invalid)("label",o.TEMPLATE_TEXT.create)}},dependencies:[m.sg,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.KE,p.hX,p.R9,b.Nt,M.oG,g.Mq,g.hl,g.nW,N.gD,Y.ey,y.L,m.Ov],encapsulation:2,changeDetection:0}),e})(),j=(()=>{class e{constructor(a,o,r,T,d){this.dialogRef=a,this.data=o,this.taskService=r,this.loadingService=T,this.notificationService=d,this.TEMPLATE_TEXT=w}deleteTask(){this.loadingService.startLoad(),this.taskService.deleteTask(this.data.id).pipe((0,h.q)(1)).subscribe({next:a=>{this.dialogRef.close(),this.notificationService.openSnackBar(a.message||"")},error:a=>{this.dialogRef.close(),console.error(a)}})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.so),t.Y36(u.WI),t.Y36(v),t.Y36(f.b),t.Y36(A.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["delete-task-modal"]],decls:4,vars:2,consts:[[1,"mat-title"],["styleClasses","btn-warn",3,"label","buttonClick"]],template:function(a,o){1&a&&(t.TgZ(0,"div")(1,"div",0),t._uU(2),t.qZA(),t.TgZ(3,"ui-button",1),t.NdJ("buttonClick",function(){return o.deleteTask()}),t.qZA()()),2&a&&(t.xp6(2),t.Oqu(o.TEMPLATE_TEXT.sure),t.xp6(1),t.Q6J("label",o.TEMPLATE_TEXT.delete))},dependencies:[y.L],encapsulation:2,changeDetection:0}),e})();function G(e,i){if(1&e&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.s9C("value",a.name),t.xp6(1),t.Oqu(a.name)}}let H=(()=>{class e{constructor(a,o,r,T,d,L){this.dialogRef=a,this.data=o,this.taskService=r,this.categoryService=T,this.loadingService=d,this.notificationService=L,this.TEMPLATE_TEXT=R,this.categories$=this.categoryService.getCategories(),this.form=(e=>new s.cw({name:new s.NI({value:e?.name??null,disabled:!0}),deadline:new s.NI(e?.deadline??null,[s.kI.required]),categoryName:new s.NI(e?.category?.name??null),priority:new s.NI(e?.priority??null)}))(this.data)}updateTask(){this.loadingService.startLoad();const a={...this.data,...this.form.value};this.taskService.updateTask(a).pipe((0,h.q)(1)).subscribe({next:o=>{this.notificationService.openSnackBar(o.message||"")},error:o=>{console.error(o)}}),this.dialogRef.close()}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(u.so),t.Y36(u.WI),t.Y36(v),t.Y36(Z.H),t.Y36(f.b),t.Y36(A.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["edit-task-modal"]],decls:25,vars:14,consts:[[1,"form-group","form-group__modal","flex-column",3,"formGroup"],[1,"mat-title"],["color","accent","appearance","outline"],["matInput","","formControlName","name","placeholder","Create app"],["matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","categoryName"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"mbottom-20"],["type","submit",3,"disabled","label","buttonClick"],[3,"value"]],template:function(a,o){if(1&a&&(t.TgZ(0,"form",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9),t.qZA(),t._UZ(10,"input",4)(11,"mat-datepicker-toggle",5)(12,"mat-datepicker",null,6),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"mat-select",7)(18,"mat-option"),t._uU(19),t.qZA(),t.YNc(20,G,2,2,"mat-option",8),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"mat-checkbox",9),t._uU(23),t.qZA(),t.TgZ(24,"ui-button",10),t.NdJ("buttonClick",function(){return o.updateTask()}),t.qZA()()),2&a){const r=t.MAs(13);t.Q6J("formGroup",o.form),t.xp6(2),t.Oqu(o.TEMPLATE_TEXT.editTask),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.taskName),t.xp6(4),t.Oqu(o.TEMPLATE_TEXT.deadline),t.xp6(1),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(o.TEMPLATE_TEXT.category),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.nothing),t.xp6(1),t.Q6J("ngForOf",t.lcZ(21,12,o.categories$)),t.xp6(3),t.Oqu(o.TEMPLATE_TEXT.priority),t.xp6(1),t.Q6J("disabled",o.form.invalid)("label",o.TEMPLATE_TEXT.update)}},dependencies:[m.sg,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,p.KE,p.hX,p.R9,b.Nt,M.oG,g.Mq,g.hl,g.nW,N.gD,Y.ey,y.L,m.Ov],encapsulation:2,changeDetection:0}),e})();var K=n(629);function z(e,i){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.id," ")}}function W(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.id," ")}}function V(e,i){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.taskName," ")}}function tt(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.name," ")}}function et(e,i){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.deadline," ")}}function at(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,a.deadline)," ")}}function ot(e,i){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.priority," ")}}function it(e,i){1&e&&t._UZ(0,"div",17)}function nt(e,i){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,it,1,0,"div",16),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.Q6J("ngIf",a.priority)}}function st(e,i){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.category," ")}}function rt(e,i){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const a=i.$implicit;t.xp6(1),t.hij(" ",a.category," ")}}function lt(e,i){if(1&e&&(t.TgZ(0,"th",18),t._uU(1),t.qZA()),2&e){const a=t.oxw();t.xp6(1),t.hij(" ",a.TEMPLATE_TEXT.settings," ")}}function ct(e,i){if(1&e){const a=t.EpF();t.TgZ(0,"td",15)(1,"ui-button",19),t.NdJ("buttonClick",function(){const T=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.deleteTask(T.id))}),t.qZA(),t.TgZ(2,"ui-button",20),t.NdJ("buttonClick",function(){const T=t.CHM(a).$implicit,d=t.oxw();return t.KtG(d.editTask(T))}),t.qZA()()}}function Tt(e,i){1&e&&t._UZ(0,"tr",21)}function dt(e,i){1&e&&t._UZ(0,"tr",22)}function mt(e,i){if(1&e&&(t.TgZ(0,"tr",23)(1,"td",24),t._uU(2),t.qZA()()),2&e){const a=t.oxw();t.xp6(2),t.Oqu(a.TEMPLATE_TEXT.empty)}}const ut=function(){return[]};let pt=(()=>{class e{constructor(a,o,r,T,d){this.loadingService=a,this.authService=o,this.eventBusService=r,this.taskService=T,this.dialog=d,this.TEMPLATE_TEXT=$,this.data$=new P.X(new l.by),this.displayedColumns=["id","name","deadline","priority","category","settings"],this.sort=new C.YE,this.destroy$=new X.x}ngOnInit(){this.getTasks(),this.eventBusSubscribe(),this.authService.currentUrl$.next(k.t.TASK_URL)}ngOnDestroy(){this.destroy$.next(!1),this.destroy$.complete()}deleteTask(a){this.dialog.open(j,{data:a}).afterClosed().pipe((0,h.q)(1)).subscribe(()=>this.getTasks())}editTask(a){this.dialog.open(H,{data:a}).afterClosed().pipe((0,h.q)(1)).subscribe(()=>this.getTasks())}getTasks(){this.loadingService.startLoad(),this.taskService.getTasks().pipe((0,E.R)(this.destroy$)).subscribe({next:a=>{this.data$.next(new l.by(a)),this.data$.value.sort=this.sort,this.loadingService.stopLoad()},error:a=>console.log(a)})}eventBusSubscribe(){this.eventBusService.on(k.t.TASK_URL).pipe((0,E.R)(this.destroy$)).subscribe(()=>{this.dialog.open(F)}),this.eventBusService.on(k.t.UPDATE_TASK_LIST).pipe((0,E.R)(this.destroy$)).subscribe(()=>{this.getTasks()}),this.eventBusService.on(k.t.LOGOUT).pipe((0,E.R)(this.destroy$)).subscribe(()=>{this.data$.next(new l.by)})}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.b),t.Y36(K.e),t.Y36(S.Y),t.Y36(v),t.Y36(u.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["tasks-list"]],viewQuery:function(a,o){if(1&a&&t.Gf(C.YE,5),2&a){let r;t.iGM(r=t.CRH())&&(o.sort=r.first)}},decls:24,vars:7,consts:[[1,"justify-center"],["mat-table","","matSort","",1,"mat-elevation-z8","table-list",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","deadline"],["matColumnDef","priority"],["matColumnDef","category"],["matColumnDef","settings"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","table-list__priority_true",4,"ngIf"],[1,"table-list__priority_true"],["mat-header-cell",""],["typeDir","mat-icon-button","styleClasses","btn-icon-warn","icon","delete icon",3,"buttonClick"],["typeDir","mat-icon-button","styleClasses","btn-icon-accent","icon","edit icon",3,"buttonClick"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"]],template:function(a,o){1&a&&(t.TgZ(0,"div",0)(1,"table",1),t.ALo(2,"async"),t.ynx(3,2),t.YNc(4,z,2,1,"th",3),t.YNc(5,W,2,1,"td",4),t.BQk(),t.ynx(6,5),t.YNc(7,V,2,1,"th",3),t.YNc(8,tt,2,1,"td",4),t.BQk(),t.ynx(9,6),t.YNc(10,et,2,1,"th",3),t.YNc(11,at,3,3,"td",4),t.BQk(),t.ynx(12,7),t.YNc(13,ot,2,1,"th",3),t.YNc(14,nt,2,1,"td",4),t.BQk(),t.ynx(15,8),t.YNc(16,st,2,1,"th",3),t.YNc(17,rt,2,1,"td",4),t.BQk(),t.ynx(18,9),t.YNc(19,lt,2,1,"th",10),t.YNc(20,ct,3,0,"td",4),t.BQk(),t.YNc(21,Tt,1,0,"tr",11),t.YNc(22,dt,1,0,"tr",12),t.YNc(23,mt,3,1,"tr",13),t.qZA()()),2&a&&(t.xp6(1),t.Q6J("dataSource",t.lcZ(2,4,o.data$)||t.DdM(6,ut)),t.xp6(20),t.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",o.displayedColumns))},dependencies:[m.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,C.YE,C.nU,y.L,m.Ov,m.uU],styles:[".table-list__priority_true[_ngcontent-%COMP%]{text-align:center;width:40px;height:20px;border-radius:10px;background-color:var(--color-accent)}"],changeDetection:0}),e})();function gt(e,i){1&e&&t._UZ(0,"ui-spinner")}const ft=[{path:"",component:(()=>{class e{constructor(a){this.loadingService=a,this.loading$=this.loadingService.loading$}}return e.\u0275fac=function(a){return new(a||e)(t.Y36(f.b))},e.\u0275cmp=t.Xpm({type:e,selectors:[["tasks-page"]],decls:3,vars:3,consts:[[4,"loader"]],template:function(a,o){1&a&&(t._UZ(0,"tasks-list"),t.YNc(1,gt,1,0,"ui-spinner",0),t.ALo(2,"async")),2&a&&(t.xp6(1),t.Q6J("loader",t.lcZ(2,1,o.loading$)||!1))},dependencies:[D.T,U.Z,pt,m.Ov],styles:["[_nghost-%COMP%]{position:relative}"],changeDetection:0}),e})()}];let ht=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(ft),_.Bz]}),e})();var kt=n(5566);let vt=(()=>{class e{}return e.\u0275fac=function(a){return new(a||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[v,Z.H],imports:[m.ez,s.UX,ht,kt.m]}),e})()}}]);