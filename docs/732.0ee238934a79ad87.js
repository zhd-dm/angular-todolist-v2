"use strict";(self.webpackChunkangular_todolist_v2=self.webpackChunkangular_todolist_v2||[]).push([[732],{2732:(Ct,b,i)=>{i.r(b),i.d(b,{TaskModule:()=>kt});var T=i(6895),s=i(4006),_=i(1635),t=i(4650),D=i(1572);let U=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["ui-spinner"]],decls:3,vars:0,consts:[[1,"spinner-container","justify-center","align-center","wh-100"],[1,"spinner__background","wh-100"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0),t._UZ(1,"div",1)(2,"mat-spinner"),t.qZA())},dependencies:[D.Ou],styles:["[_nghost-%COMP%]   .spinner-container[_ngcontent-%COMP%]{position:absolute;top:0;left:0;z-index:1000}[_nghost-%COMP%]   .spinner-container[_ngcontent-%COMP%]   .spinner__background[_ngcontent-%COMP%]{position:absolute;background-color:var(--color-black);opacity:.3}"],changeDetection:0}),e})();var P=i(1135),X=i(7579),f=i(5698),v=i(2722),C=i(6308),l=i(7155),h=i(7525),q=i(3985);const O={id:"ID",taskName:"Task name",deadline:"Deadline",priority:"Priority",category:"Category",settings:"Settings",deleteTask:"Delete task",editTask:"Edit task",empty:"No tasks avaliable..."},w={createNewTask:"Create new task",taskName:"Task Name",deadline:"Deadline",category:"Category",nothing:"Nothing",priority:"Priority?",create:"Create"},$={delete:"Delete",sure:"Are you sure?"},R={taskName:"Task name",editTask:"Edit task",deadline:"Deadline",category:"Category",nothing:"Nothing",priority:"Priority?",update:"Update"};var p=i(5412),E=i(5039),A=i(5328),x=i(8273),c=i(3121),Q=i(4761);let k=(()=>{class e{constructor(o){this.apiService=o}getTasks(){return this.apiService.sendRequest(c.V7.get,`${c.rY}${c.wA.get}`)}createTask(o){return this.apiService.sendRequest(c.V7.post,`${c.rY}${c.wA.create}`,o)}updateTask(o){return this.apiService.sendRequest(c.V7.put,`${c.rY}${c.wA.update}`,o)}deleteTask(o){return this.apiService.sendRequest(c.V7.delete,`${c.rY}${c.wA.delete}`,o)}}return e.\u0275fac=function(o){return new(o||e)(t.LFG(Q.s))},e.\u0275prov=t.Yz7({token:e,factory:e.\u0275fac}),e})();var Z=i(4072),u=i(9549),S=i(4144),M=i(6709),g=i(9602),N=i(4385),Y=i(3238),y=i(4083);function B(e,a){if(1&e&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.s9C("value",o.name),t.xp6(1),t.Oqu(o.name)}}let F=(()=>{class e{constructor(o,n,r,m,d,L,vt){this.router=o,this.dialogRef=n,this.loadingService=r,this.notificationService=m,this.eventBusService=d,this.taskService=L,this.categoryService=vt,this.TEMPLATE_TEXT=w,this.categories$=this.categoryService.getCategories(),this.form=new s.cw({name:new s.NI(null,[s.kI.required,s.kI.minLength(5)]),deadline:new s.NI(null,[s.kI.required]),category:new s.NI(null),priority:new s.NI(null)})}createTask(){this.loadingService.startLoad(),this.taskService.createTask(this.form.value).pipe((0,f.q)(1)).subscribe(o=>{this.loadingService.stopLoad(),this.notificationService.openSnackBar(o.message||""),o.status&&(this.goTo(q.W$.tasksList),this.eventBusService.push({type:h.t.UPDATE_TASK_LIST}))}),this.dialogRef.close()}goTo(o){this.router.navigate([o])}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(_.F0),t.Y36(p.so),t.Y36(E.b),t.Y36(A.g),t.Y36(x.Y),t.Y36(k),t.Y36(Z.H))},e.\u0275cmp=t.Xpm({type:e,selectors:[["create-task-modal"]],decls:25,vars:15,consts:[[1,"form-group","form-group__modal","flex-column",3,"formGroup"],[1,"mat-title"],["color","accent","appearance","outline"],["type","text","matInput","","formControlName","name",3,"placeholder"],["type","text","matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","category"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"mbottom-20"],["type","submit",3,"disabled","label","buttonClick"],[3,"value"]],template:function(o,n){if(1&o&&(t.TgZ(0,"form",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9),t.qZA(),t._UZ(10,"input",4)(11,"mat-datepicker-toggle",5)(12,"mat-datepicker",null,6),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"mat-select",7)(18,"mat-option"),t._uU(19),t.qZA(),t.YNc(20,B,2,2,"mat-option",8),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"mat-checkbox",9),t._uU(23),t.qZA(),t.TgZ(24,"ui-button",10),t.NdJ("buttonClick",function(){return n.createTask()}),t.qZA()()),2&o){const r=t.MAs(13);t.Q6J("formGroup",n.form),t.xp6(2),t.Oqu(n.TEMPLATE_TEXT.createNewTask),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.taskName),t.xp6(1),t.Q6J("placeholder",n.TEMPLATE_TEXT.taskName),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.deadline),t.xp6(1),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(n.TEMPLATE_TEXT.category),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.nothing),t.xp6(1),t.Q6J("ngForOf",t.lcZ(21,13,n.categories$)),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.priority),t.xp6(1),t.Q6J("disabled",n.form.invalid)("label",n.TEMPLATE_TEXT.create)}},dependencies:[T.sg,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,u.KE,u.hX,u.R9,S.Nt,M.oG,g.Mq,g.hl,g.nW,N.gD,Y.ey,y.L,T.Ov],encapsulation:2,changeDetection:0}),e})(),j=(()=>{class e{constructor(o,n,r,m,d){this.dialogRef=o,this.data=n,this.taskService=r,this.loadingService=m,this.notificationService=d,this.TEMPLATE_TEXT=$}deleteTask(){this.loadingService.startLoad(),this.taskService.deleteTask(this.data.id).pipe((0,f.q)(1)).subscribe({next:o=>{this.dialogRef.close(),this.notificationService.openSnackBar(o.message||"")},error:o=>{this.dialogRef.close(),console.error(o)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.so),t.Y36(p.WI),t.Y36(k),t.Y36(E.b),t.Y36(A.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["delete-task-modal"]],decls:4,vars:2,consts:[[1,"mat-title"],["styleClasses","btn-warn",3,"label","buttonClick"]],template:function(o,n){1&o&&(t.TgZ(0,"div")(1,"div",0),t._uU(2),t.qZA(),t.TgZ(3,"ui-button",1),t.NdJ("buttonClick",function(){return n.deleteTask()}),t.qZA()()),2&o&&(t.xp6(2),t.Oqu(n.TEMPLATE_TEXT.sure),t.xp6(1),t.Q6J("label",n.TEMPLATE_TEXT.delete))},dependencies:[y.L],encapsulation:2,changeDetection:0}),e})();function G(e,a){if(1&e&&(t.TgZ(0,"mat-option",11),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.s9C("value",o.name),t.xp6(1),t.Oqu(o.name)}}let H=(()=>{class e{constructor(o,n,r,m,d,L){this.dialogRef=o,this.data=n,this.taskService=r,this.categoryService=m,this.loadingService=d,this.notificationService=L,this.TEMPLATE_TEXT=R,this.categories$=this.categoryService.getCategories(),this.form=(e=>new s.cw({name:new s.NI({value:e?.name??null,disabled:!0}),deadline:new s.NI(e?.deadline??null,[s.kI.required]),categoryName:new s.NI(e?.category?.name??null),priority:new s.NI(e?.priority??null)}))(this.data)}updateTask(){this.loadingService.startLoad();const o={...this.data,...this.form.value};this.taskService.updateTask(o).pipe((0,f.q)(1)).subscribe({next:n=>{this.dialogRef.close(),this.notificationService.openSnackBar(n.message||"")},error:n=>{this.dialogRef.close(),console.error(n)}})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(p.so),t.Y36(p.WI),t.Y36(k),t.Y36(Z.H),t.Y36(E.b),t.Y36(A.g))},e.\u0275cmp=t.Xpm({type:e,selectors:[["edit-task-modal"]],decls:25,vars:14,consts:[[1,"form-group","form-group__modal","flex-column",3,"formGroup"],[1,"mat-title"],["color","accent","appearance","outline"],["matInput","","formControlName","name","placeholder","Create app"],["matInput","","formControlName","deadline",3,"matDatepicker"],["matSuffix","",3,"for"],["picker",""],["formControlName","categoryName"],[3,"value",4,"ngFor","ngForOf"],["formControlName","priority",1,"mbottom-20"],["type","submit",3,"disabled","label","buttonClick"],[3,"value"]],template:function(o,n){if(1&o&&(t.TgZ(0,"form",0)(1,"div",1),t._uU(2),t.qZA(),t.TgZ(3,"mat-form-field",2)(4,"mat-label"),t._uU(5),t.qZA(),t._UZ(6,"input",3),t.qZA(),t.TgZ(7,"mat-form-field",2)(8,"mat-label"),t._uU(9),t.qZA(),t._UZ(10,"input",4)(11,"mat-datepicker-toggle",5)(12,"mat-datepicker",null,6),t.qZA(),t.TgZ(14,"mat-form-field",2)(15,"mat-label"),t._uU(16),t.qZA(),t.TgZ(17,"mat-select",7)(18,"mat-option"),t._uU(19),t.qZA(),t.YNc(20,G,2,2,"mat-option",8),t.ALo(21,"async"),t.qZA()(),t.TgZ(22,"mat-checkbox",9),t._uU(23),t.qZA(),t.TgZ(24,"ui-button",10),t.NdJ("buttonClick",function(){return n.updateTask()}),t.qZA()()),2&o){const r=t.MAs(13);t.Q6J("formGroup",n.form),t.xp6(2),t.Oqu(n.TEMPLATE_TEXT.editTask),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.taskName),t.xp6(4),t.Oqu(n.TEMPLATE_TEXT.deadline),t.xp6(1),t.Q6J("matDatepicker",r),t.xp6(1),t.Q6J("for",r),t.xp6(5),t.Oqu(n.TEMPLATE_TEXT.category),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.nothing),t.xp6(1),t.Q6J("ngForOf",t.lcZ(21,12,n.categories$)),t.xp6(3),t.Oqu(n.TEMPLATE_TEXT.priority),t.xp6(1),t.Q6J("disabled",n.form.invalid)("label",n.TEMPLATE_TEXT.update)}},dependencies:[T.sg,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,u.KE,u.hX,u.R9,S.Nt,M.oG,g.Mq,g.hl,g.nW,N.gD,Y.ey,y.L,T.Ov],encapsulation:2,changeDetection:0}),e})();var K=i(3899);function z(e,a){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.id," ")}}function W(e,a){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.id," ")}}function V(e,a){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.taskName," ")}}function tt(e,a){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.name," ")}}function et(e,a){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.deadline," ")}}function ot(e,a){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.ALo(2,"date"),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",t.lcZ(2,1,o.deadline)," ")}}function nt(e,a){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.priority," ")}}function at(e,a){1&e&&t._UZ(0,"div",17)}function it(e,a){if(1&e&&(t.TgZ(0,"td",15),t.YNc(1,at,1,0,"div",16),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.Q6J("ngIf",o.priority)}}function st(e,a){if(1&e&&(t.TgZ(0,"th",14),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.category," ")}}function rt(e,a){if(1&e&&(t.TgZ(0,"td",15),t._uU(1),t.qZA()),2&e){const o=a.$implicit;t.xp6(1),t.hij(" ",o.category," ")}}function lt(e,a){if(1&e&&(t.TgZ(0,"th",18),t._uU(1),t.qZA()),2&e){const o=t.oxw();t.xp6(1),t.hij(" ",o.TEMPLATE_TEXT.settings," ")}}function ct(e,a){if(1&e){const o=t.EpF();t.TgZ(0,"td",15)(1,"ui-button",19),t.NdJ("buttonClick",function(){const m=t.CHM(o).$implicit,d=t.oxw();return t.KtG(d.deleteTask(m.id))}),t.qZA(),t.TgZ(2,"ui-button",20),t.NdJ("buttonClick",function(){const m=t.CHM(o).$implicit,d=t.oxw();return t.KtG(d.editTask(m))}),t.qZA()()}}function mt(e,a){1&e&&t._UZ(0,"tr",21)}function dt(e,a){1&e&&t._UZ(0,"tr",22)}function Tt(e,a){if(1&e&&(t.TgZ(0,"tr",23)(1,"td",24),t._uU(2),t.qZA()()),2&e){const o=t.oxw();t.xp6(2),t.Oqu(o.TEMPLATE_TEXT.empty)}}const pt=function(){return[]};let ut=(()=>{class e{constructor(o,n,r,m,d){this.loadingService=o,this.authService=n,this.eventBusService=r,this.taskService=m,this.dialog=d,this.TEMPLATE_TEXT=O,this.data$=new P.X(new l.by),this.displayedColumns=["id","name","deadline","priority","category","settings"],this.sort=new C.YE,this.destroy$=new X.x}ngOnInit(){this.loadingService.startLoad(),this.getTasks(),this.eventBusSubscribe(),this.authService.currentUrl$.next(h.t.TASK_URL)}ngOnDestroy(){this.destroy$.next(!1),this.destroy$.complete()}deleteTask(o){this.dialog.open(j,{data:o}).afterClosed().pipe((0,f.q)(1)).subscribe(()=>this.getTasks())}editTask(o){this.dialog.open(H,{data:o}).afterClosed().pipe((0,f.q)(1)).subscribe(()=>this.getTasks())}getTasks(){this.taskService.getTasks().pipe((0,v.R)(this.destroy$)).subscribe({next:o=>{this.data$.next(new l.by(o)),this.data$.value.sort=this.sort,this.loadingService.stopLoad()},error:o=>console.log(o)})}eventBusSubscribe(){this.eventBusService.on(h.t.TASK_URL).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.dialog.open(F)}),this.eventBusService.on(h.t.UPDATE_TASK_LIST).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.getTasks()}),this.eventBusService.on(h.t.LOGOUT).pipe((0,v.R)(this.destroy$)).subscribe(()=>{this.data$.next(new l.by)})}}return e.\u0275fac=function(o){return new(o||e)(t.Y36(E.b),t.Y36(K.e),t.Y36(x.Y),t.Y36(k),t.Y36(p.uw))},e.\u0275cmp=t.Xpm({type:e,selectors:[["tasks-list"]],viewQuery:function(o,n){if(1&o&&t.Gf(C.YE,5),2&o){let r;t.iGM(r=t.CRH())&&(n.sort=r.first)}},decls:24,vars:7,consts:[[1,"justify-center"],["mat-table","","matSort","",1,"mat-elevation-z8","table-list",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","deadline"],["matColumnDef","priority"],["matColumnDef","category"],["matColumnDef","settings"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],["class","mat-row",4,"matNoDataRow"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["class","table-list__priority_true",4,"ngIf"],[1,"table-list__priority_true"],["mat-header-cell",""],["typeDir","mat-icon-button","styleClasses","btn-icon-warn","icon","delete icon",3,"buttonClick"],["typeDir","mat-icon-button","styleClasses","btn-icon-accent","icon","edit icon",3,"buttonClick"],["mat-header-row",""],["mat-row",""],[1,"mat-row"],["colspan","6",1,"mat-cell"]],template:function(o,n){1&o&&(t.TgZ(0,"div",0)(1,"table",1),t.ALo(2,"async"),t.ynx(3,2),t.YNc(4,z,2,1,"th",3),t.YNc(5,W,2,1,"td",4),t.BQk(),t.ynx(6,5),t.YNc(7,V,2,1,"th",3),t.YNc(8,tt,2,1,"td",4),t.BQk(),t.ynx(9,6),t.YNc(10,et,2,1,"th",3),t.YNc(11,ot,3,3,"td",4),t.BQk(),t.ynx(12,7),t.YNc(13,nt,2,1,"th",3),t.YNc(14,it,2,1,"td",4),t.BQk(),t.ynx(15,8),t.YNc(16,st,2,1,"th",3),t.YNc(17,rt,2,1,"td",4),t.BQk(),t.ynx(18,9),t.YNc(19,lt,2,1,"th",10),t.YNc(20,ct,3,0,"td",4),t.BQk(),t.YNc(21,mt,1,0,"tr",11),t.YNc(22,dt,1,0,"tr",12),t.YNc(23,Tt,3,1,"tr",13),t.qZA()()),2&o&&(t.xp6(1),t.Q6J("dataSource",t.lcZ(2,4,n.data$)||t.DdM(6,pt)),t.xp6(20),t.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns))},dependencies:[T.O5,l.BZ,l.fO,l.as,l.w1,l.Dz,l.nj,l.ge,l.ev,l.XQ,l.Gk,l.Ee,C.YE,C.nU,y.L,T.Ov,T.uU],styles:[".table-list__priority_true[_ngcontent-%COMP%]{text-align:center;width:40px;height:20px;border-radius:10px;background-color:var(--color-accent)}"],changeDetection:0}),e})();const gt=[{path:"",component:(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=t.Xpm({type:e,selectors:[["tasks-page"]],decls:2,vars:0,template:function(o,n){1&o&&t._UZ(0,"tasks-list")(1,"ui-spinner")},dependencies:[U,ut],styles:["[_nghost-%COMP%]{position:relative}"],changeDetection:0}),e})()}];let ft=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[_.Bz.forChild(gt),_.Bz]}),e})();var ht=i(5566);let kt=(()=>{class e{}return e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({providers:[k,Z.H],imports:[T.ez,s.UX,ft,ht.m]}),e})()}}]);